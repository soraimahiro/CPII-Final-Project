# CPII-Final-Project

分組5
41347020S 張育瑄
41347031S 江春澤
41347014S 姚承希

這是一個基於SDL2開發的遊戲項目。

## 遊戲說明

這是一個基於《扭曲寓言》(Twisted Fables)的卡牌對戰遊戲。在遊戲中，玩家將扮演暗黑童話故事中的角色，通過收集和使用卡牌來擊敗對手。每個角色都有其獨特的技能和牌組，玩家需要合理運用策略來取得勝利。

### 遊戲目標
- 將對手生命值降至0
- 合理管理能量和防禦值
- 構建強大的卡組組合
- 靈活運用角色特殊技能

### 遊戲流程
1. **準備階段**
   - 選擇角色
   - 設置初始生命值和必殺閾值
   - 準備初始牌組
   - 抽取初始手牌

2. **戰鬥階段**
   - 回合開始：結算持續效果
   - 清理階段：棄掉出牌區域的牌，重置防禦值
   - 行動階段：
     - 使用攻擊牌進行攻擊
     - 使用防禦牌增加防禦值
     - 使用移動牌改變位置
     - 使用技能牌觸發特殊效果
     - 使用必殺牌發動強力效果
     - 購買新卡牌
     - 進行專注行動
   - 結束階段：
     - 重置能量值
     - 棄掉手牌
     - 抽取新卡牌

3. **結算階段**
   - 計算傷害和防禦
   - 更新生命值
   - 檢查勝負條件

### 界面說明
- 左側區域：戰鬥路徑和玩家資訊
- 中間區域：出牌區和技能區域（必殺牌、技能牌商店）
- 右側區域：棄牌堆、牌庫、操作按鈕（設定、專注、結束回合）、基礎牌商店

### 基本操作
- 商店按鈕操作：
  - 進入商店界面
  - 點擊卡牌進行購買
  - 點擊關閉按鈕退出商店

- 卡牌操作：
  - 點擊手牌中的卡牌顯示卡片詳細資訊
  - 點擊使用按鈕使用選中的卡牌
  - 點擊技能區域查看技能詳情與技能牌商店

- 區域操作：
  - 點擊棄牌區查看棄牌
  - 點擊牌庫查看牌庫資訊
  - 點擊技能區域查看技能詳情

- 功能按鈕操作：
  - 點擊"專注"按鈕進入專注模式
  - 點擊"結束回合"按鈕結束當前回合
  - 點擊"設定"按鈕打開設定選單

- 專注模式：
  - 可以選擇手牌或棄牌區的卡牌

## 遊戲編譯與運行

### 系統要求
- Linux 作業系統
- GCC 編譯器
- SDL2 函式庫
- SDL2_ttf 函式庫

### 安裝依賴

#### Linux (Ubuntu/Debian)
```bash
sudo apt-get update
sudo apt-get install gcc
sudo apt-get install libsdl2-dev
sudo apt-get install libsdl2-ttf-dev
```

#### Linux (Fedora)
```bash
sudo dnf install gcc
sudo dnf install SDL2-devel
sudo dnf install SDL2_ttf-devel
```

### 編譯項目

#### Linux
```bash
make
```

### 運行遊戲
```bash
./build/main
```

### 清理編譯文件
```bash
make clean
```

## 檔案結構

```
CPII-Final-Project/
├── assets/          # 遊戲資源文件
├── build/           # 編譯輸出目錄
├── docs/            # 項目文檔
├── scene/           # 遊戲場景相關文件
├── src/             # 源代碼
│   ├── ui/         # UI相關代碼
│   │   ├── ui.c           # UI核心實現
│   │   ├── ui.h           # UI頭文件
│   │   ├── ui_stage.c     # 遊戲場景UI實現
│   │   ├── ui_stage.h     # 遊戲場景UI頭文件
│   │   ├── ui_component.c # UI組件實現
│   │   └── ui_component.h # UI組件頭文件
│   ├── main.c      # 程序入口
│   ├── game.c      # 遊戲核心邏輯
│   ├── game.h      # 遊戲核心頭文件
│   ├── card.c      # 卡牌系統實現
│   ├── card.h      # 卡牌系統頭文件
│   ├── card_id.h   # 卡牌ID定義
│   ├── skills.c    # 技能系統實現
│   ├── skills.h    # 技能系統頭文件
│   ├── stage.c     # 場景管理實現
│   ├── stage.h     # 場景管理頭文件
│   ├── vector.c    # 向量數據結構實現
│   ├── vector.h    # 向量數據結構頭文件
│   ├── client.c    # 客戶端實現
│   ├── client.h    # 客戶端頭文件
│   └── architecture.h # 架構定義
├── .vscode/        # VSCode配置
├── Makefile        # 編譯配置文件
└── README.md       # 項目說明文檔
```

